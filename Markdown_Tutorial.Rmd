---
title: "Introduction to R Markdown and Version Control"
author: "Jack Quach"
date: "`r Sys.time()`"
output: 
  html_document:
    toc: true
    toc_float: false
    toc_collapsed: true
    number_sections: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = TRUE, warning = TRUE) # set knit options here
# install.packages("pacman") # if you don't have the package
pacman::p_load(dplyr, tidyr, ggplot2) # adding packages
```

# Content {.tabset}

## Prerequisites 

Install the most up-to-date version of:

- R: https://cloud.r-project.org
- RStudio: http://www.rstudio.com/download
- Git: https://git-scm.com/downloads *Note: open the download and follow normal install procedures on your computer but you won’t see any software installed when you’re done*

**R Markdown**

If you don't already have R Markdown installed, run the following command line in R:

- ```install.packages('rmarkdown')``` you can just run this in the R console

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

### Basics 

**3 components**

- An (optional)  *metadata header* surrounded by ---s
- Text (text mixed with simple text formatting)
- Code chunks

### Metadata header (optional)

[HTML header book chapter](https://bookdown.org/yihui/rmarkdown/html-document.html)

- Contains: table of contents, section numbering, document styles

### Text 

[HTML text formatting book chapter](https://bookdown.org/yihui/rmarkdown/html-document.html)

- Contains: formatting examples for HTML, e.g., how to bold, italicize, make lists 

### Code chunks

You can quickly insert code chunks into your file with:

- the keyboard shortcut: Ctrl + Alt + I (OS X: Cmd + Option + I)
- the Add Chunk  command in the editor toolbar
- or by typing the chunk delimiters

Chunk output can be customized with knitr options, arguments set in the {} of a chunk header. Above we use:

- ```include = FALSE``` prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.
- ```echo = FALSE``` prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures.
- ```message = FALSE``` prevents messages that are generated by code from appearing in the finished file.
- ```warning = FALSE``` prevents warnings that are generated by code from appearing in the finished.
- ````fig.cap = "..."``` adds a caption to graphical results.

#### Sample code chunk

```{r}
# Summarizing cars data to demonstrate code chunk
cars %>% 
  summary
```

#### Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE, fig.cap = "Distance vs. Speed from the cars dataset"}
cars %>% 
  ggplot(aes(x = speed, y = dist)) +
  geom_point() + 
  geom_smooth() +
  theme_bw()
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

#### Tables

You can also put tables here. Useful for descriptive stats or regression results that you have already processed and cleaned. For example, using the *mtcars* dataset from R:

First, looking at the beginning of the dataset:

```{r}
head(mtcars)
```

Now, doing some stats by groups and also cleaning up some data columns:

```{r}
mtcars %>% 
  group_by(am) %>% 
  summarise(mean_mpg = mean(mpg),
            sd_mpg = sd(mpg)) %>% 
  mutate_at(2:3, round, digits = 1) %>% 
  mutate(mean_sd_mpg = paste0(mean_mpg, " (", sd_mpg, ")"))
```

You can put interactive data tables right here as well using the **DT** package.

```{r}
DT::datatable(mtcars)
```

## Version Control

> A version control system records changes to a file or set of files over time so that changes can be tracked and specific versions of a file can be recalled later. As such, it is an essential element of a reproducible workflow that deserves due consideration among the learning objectives of statistics and data science courses.

- [Beckman et al.](https://arxiv.org/abs/2001.01988)

### Git 

Git is a version control system that lets you track changes to files over time. These files can be any kind of file (eg .doc, .pdf, .xls), but free text differences are most easily visible (eg txt, csv, md).

*It is basically the track changes feature from MS Word, but much more extensive*

### Best practices for commits

Ideally, each commit should be minimal but complete:

**Minimal**: A commit should only contain changes related to a single problem. This will make it easier to understand the commit at a glance, and to describe it with a simple message. If you should discover a new problem, you should do a separate commit.

**Complete**: A commit should solve the problem that it claims to solve. If you think you’ve fixed a bug, the commit should contain a unit test that confirms you’re right.

Each commit message should:

Be concise, yet evocative. At a glance, you should be able to see what a commit does. But there should be enough detail so you can remember (and understand) what was done.

Describe the why, not the what. Since you can always retrieve the diff associated with a commit, the message doesn’t need to say exactly what changed. Instead it should provide a high-level summary that focuses on the reasons for the change.

## GitHub

Github is a website for storing your git versioned files remotely. It has many nice features to be able visualize differences between images, rendering & diffing map data files, render text data files, and track changes in text.

In short, Git will track and version your files, GitHub stores this online and enables you to collaborate with others (and yourself). 

- https://github.com/

*More coming soon....*

## Useful info

### R Markdown

https://bookdown.org/yihui/rmarkdown/

https://ohi-science.org/data-science-training/rstudio.html#rmarkdown

### Git

https://r-pkgs.org/git.html

https://ohi-science.org/data-science-training/github.html

